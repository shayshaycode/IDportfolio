"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1013],{42637:(e,t)=>{t.CERTIFICATE_COMPLETED="CERTIFICATE_COMPLETED",t.certificateCompleted=e=>({type:t.CERTIFICATE_COMPLETED,payload:e})},91529:(e,t,n)=>{const{registerEpics:i,registerReducer:r}=n(59671),{registerElementsEpic:c,checkOnCourseAttainmentMethod:o,checkOnCourseAssessmentMethod:a,checkOnAppReadyOrComponentsUpdatedEpic:s}=n(35435);r("certificate",n(2130)),i(c,o,a,s)},2104:(e,t,n)=>{var i=n(34398)(n(85374));const r=n(16842),c=n(60216),o=n(27378),a=n(30485),s=n(84084),l=r({displayName:"CertificateDownload",propTypes:{certificate:c.object.isRequired,username:c.string,isComplete:c.bool.isRequired,downloads:c.object.isRequired,device:c.object},onDownloadCertificateClicked(e){var t=this;return(0,i.default)((function*(){e.preventDefault(),e.currentTarget.blur();const{certificate:n,username:i}=t.props,r=yield s(n,i);if(t.props.device.touch&&!t.props.device.isWindowsTouchScreen)return r.open();const c=a(n,"fileName","Certificate");r.download(`${c}.pdf`)}))()},renderDownloadButton(){const{props:e}=this,t=!(e.username&&e.isComplete);return o.createElement("button",{className:"ev-button ev-certificate-download",onClick:this.onDownloadCertificateClicked,disabled:t},e.certificate.downloadButtonText)},renderCertificateItemText(){const{isComplete:e,certificate:t}=this.props,n=e?t.achievedText:t.notAchievedText;return o.createElement("div",null,n)},renderNameRequired(){const{props:e}=this;if(e.isComplete&&!e.username)return o.createElement("span",{className:"ev-certificate-action-warning ev-label"},o.createElement("strong",null,e.downloads.nameRequiredText))},render(){return o.createElement("div",{className:"ev-list-item ev-certificate-download"},o.createElement("div",{className:"ev-list-item-inner ev-clearfix"},o.createElement("div",{className:"ev-list-item-left"},o.createElement("div",{className:"ev-list-item-title"},this.props.certificate.title),o.createElement("div",{className:"ev-list-item-content"},this.renderCertificateItemText())),o.createElement("div",{className:"ev-list-item-right"},this.renderNameRequired(),this.renderDownloadButton())))}});e.exports=l},62353:(e,t,n)=>{const i=n(27378),{connect:r}=n(13844),c=n(2104);e.exports=r((({certificate:e,course:t,device:n})=>({device:n,isComplete:e.isComplete,certificate:t._certificate})))((e=>i.createElement(c,e)))},35435:(e,t,n)=>{const i=n(27378),{Redirect:r}=n(16094),{Observable:c}=n(49923),{asap:o}=n(30813),a=n(16762),{APP_READY:s,APP_STARTED:l}=n(81661),{addElement:d}=n(75670),{loadPdfMake:u}=n(94844),{COMPONENTS_UPDATED:p}=n(26759),{addPrompt:f}=n(36159),{COURSE_ATTAINMENT_COMPLETE:m}=n(65665),{COURSE_ASSESSMENT_COMPLETE:E}=n(74386),_=n(62353),{certificateCompleted:g}=n(42637),h=n(501),C=n(85982),S=n(54890);function T({course:e}){const t=[g(!0)];if(!e._certificate._hideDialog){const n={title:e._certificate.title,body:e._certificate.achievedText,_action:{text:e._downloads.viewDownloadsButtonText,_link:{_linkType:"extensions",_link:"downloads"}},_glyph:{_type:"icon",_icon:"license"}};t.push(f(n))}return c.of(...t,o)}t.registerElementsEpic=(e,t)=>e.filter(a(s,"_certificate",t)).mergeMap((()=>c.of(u(),d({props:{},component:_,parent:"downloads",name:"certificate"}),d({parent:"router",name:"certificateRedirect",path:"/certificate",exact:!0,render:()=>i.createElement(r,{to:"/downloads"})})))),t.checkOnAppReadyOrComponentsUpdatedEpic=(e,t)=>e.filter(a([l,p],"_certificate",t)).mergeMap((()=>{const e=t.getState(),n=S(e);return e.certificate.isComplete!==n?c.of(g(n)):c.empty()})),t.checkOnCourseAttainmentMethod=(e,t)=>e.filter(a(m,"_certificate",t)).filter((()=>{const e=t.getState();return!e.certificate.isComplete&&C(e)})).mergeMap((()=>T(t.getState()))),t.checkOnCourseAssessmentMethod=(e,t)=>e.filter(a(E,"_certificate",t)).filter((()=>{const e=t.getState();return!e.certificate.isComplete&&h(e)})).mergeMap((()=>T(t.getState())))},84084:(e,t,n)=>{var i=n(34398)(n(85374));const r=n(30485),c=n(41346),o=n(8594);function a(e){return"landscape"===e._orientation}e.exports=function(){var e=(0,i.default)((function*(e,t){const n=yield c(e),i={pageOrientation:e._orientation,content:[]},s=function(e,t){if(!t._primaryLogo&&!t._secondaryLogo)return null;const n={columns:[]},i=a(e)?[80,80]:[100,100];if(t._primaryLogo){const e={width:"50%",alignment:"left",stack:[{image:t._primaryLogo,fit:i}]};n.columns.push(e)}if(t._secondaryLogo){const e={width:"50%",alignment:"right",stack:[{image:t._secondaryLogo,fit:i}]};n.columns.push(e)}return n}(e,n);null!==s&&i.content.push(s);const l=function(e){if(!e.certificateTitle)return null;let t=[0,20,0,20],n=32;return a(e)&&(t=[0,10,0,15],n=26),{text:e.certificateTitle,alignment:"center",fontSize:n,margin:t}}(e);null!==l&&i.content.push(l);const d=function(e){if(!e.certificateMessage)return null;let t=[0,0,0,20],n=16;return a(e)&&(t=[0,0,0,15],n=12),{text:e.certificateMessage,alignment:"center",fontSize:n,margin:t}}(e);null!==d&&i.content.push(d);const u=function(e){if(!e.certificateGoal)return null;let t=[0,0,0,20],n=16;return a(e)&&(t=[0,0,0,15],n=12),{text:e.certificateGoal,alignment:"center",fontSize:n,margin:t}}(e);null!==u&&i.content.push(u);const p=function(e,t){if(!t._graphic)return null;let n=[0,0,0,20],i=[350,350];return a(e)&&(n=[0,0,0,15],i=[250,250]),{image:t._graphic,alignment:"center",fit:i,margin:n}}(e,n);null!==p&&i.content.push(p);const f=function(e,t){let n=[0,0,0,20],i=32;return a(e)&&(n=[0,0,0,15],i=24),{text:`${e.nameLabel} ${t}`,alignment:"center",italics:!0,fontSize:i,margin:n}}(e,t);i.content.push(f);const m=function(e){const t=r(e,"_dateFormat","DD/MM/YYYY"),n=o(t);let i=[0,0,0,20],c=16;return a(e)&&(i=[0,0,0,10],c=12),{text:`${e.dateLabel} ${n}`,alignment:"center",fontSize:c,margin:i}}(e);return i.content.push(m),window.pdfMake.createPdf(i)}));return function(t,n){return e.apply(this,arguments)}}()},54890:(e,t,n)=>{const i=n(85982),r=n(501),{COURSE_ATTAINMENT:c,COURSE_ASSESSMENT:o,COURSE_ASSESSMENT_PASSED:a}=n(85268);e.exports=e=>{const t=e.course._certificate._obtainmentMethod;return t===c?i(e):(t===o||t===a)&&r(e)}},501:(e,t,n)=>{const{COURSE_ASSESSMENT:i,COURSE_ASSESSMENT_PASSED:r}=n(85268);e.exports=({course:e,courseAssessment:t})=>{if(!e?._certificate?._isEnabled||!e?._courseAssessment?._isEnabled)return!1;const{_obtainmentMethod:n}=e._certificate;return!(![i,r].includes(n)||!t._isComplete||n===r&&!t._isPassed)}},85982:(e,t,n)=>{const{COURSE_ATTAINMENT:i}=n(85268);e.exports=({course:e,courseAttainment:t})=>!!(e?._certificate?._isEnabled&&e?._courseAttainment?._isEnabled&&e._certificate._obtainmentMethod===i&&t._isComplete)},85268:e=>{e.exports={COURSE_ASSESSMENT:"Course Assessment",COURSE_ASSESSMENT_PASSED:"Course Assessment Passed",COURSE_ATTAINMENT:"Course Attainment"}},2130:(e,t,n)=>{const{SETUP_APP:i}=n(81661),{CERTIFICATE_COMPLETED:r}=n(42637),c={isComplete:!1};e.exports=(e=c,t)=>t.type===i?t.payload.course._certificate?._isEnabled?e:c:t.type===r?{...e,isComplete:t.payload}:e},97568:(e,t,n)=>{var i=n(34398)(n(85374));e.exports=function(){var e=(0,i.default)((function*(e){const t=new Image;t.src=e,yield t.decode();const n=document.createElement("canvas"),i=n.getContext("2d"),r=t.width<500?t.width:500,c=t.width<500?t.height:r*t.height/t.width;return n.width=r,n.height=c,i.drawImage(t,0,0,r,c),n.toDataURL("image/png")}));return function(t){return e.apply(this,arguments)}}()},41346:(e,t,n)=>{var i=n(34398)(n(85374));const r=n(20520),c=n(61868),o=n(22810),a=n(97568);e.exports=function(){var e=(0,i.default)((function*(e,t=["_graphic","_primaryLogo","_secondaryLogo"],n=o){const i=r(t,((t,i)=>(e[i]&&(t[i]=n(e[i])),t)),{});if(!c(i))return i;for(const[e,t]of Object.entries(i)){const n=yield a(t);i[e]=n}return i}));return function(t){return e.apply(this,arguments)}}()},16762:(e,t,n)=>{const i=n(30485);e.exports=(e,t,n)=>(Array.isArray(e)||(e=[e]),({type:r})=>-1!==e.indexOf(r)&&i(n.getState(),["course",t,"_isEnabled"],!1))},8594:(e,t,n)=>{const{format:i}=n(64213);e.exports=function(e="DD/MM/YYYY",t=new Date){return"string"==typeof t&&(t=new Date(t)),i(t,(e=>e.replace(/DD/g,"dd").replace(/YYYY/g,"yyyy"))(e))}}}]);