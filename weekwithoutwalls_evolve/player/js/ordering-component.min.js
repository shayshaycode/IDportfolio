"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4900],{71110:(e,t)=>{t.ORDERING_ITEM_MOVED="ORDERING_ITEM_MOVED",t.orderingItemMoved=(e,n,i)=>({type:t.ORDERING_ITEM_MOVED,payload:{componentId:e,itemId:n,index:i}})},82003:(e,t,n)=>{const i=n(37213),o=n(16842),{bool:s,func:r,object:a}=n(60216),c=n(27378),{Component:d}=n(84335),l=n(60696),m=n(67209),p=n(88153),u=n(17290),_=n(29787),b=o({displayName:"Ordering",propTypes:{component:a.isRequired,actionButtonClicked:r.isRequired,setComponentAsReady:r.isRequired,setComponentAsViewed:r.isRequired,setComponentAsStarted:r.isRequired,showFeedback:r.isRequired,orderingItemMoved:r.isRequired,shouldHideMarking:s,styles:a},getInitialState:()=>({_selectedItemId:null}),componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},componentDidUpdate(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&this.showFeedback(!1)},UNSAFE_componentWillReceiveProps(e){const{state:t}=this,{component:n}=e;!t._selectedItemId||!n._isSubmitted&&n._Enabled||this.setState({_selectedItemId:null})},showFeedback(e=!0){const t=l(this.props.component),n=e&&this.props.component._isComplete?{refocusSelector:".ev-buttons-feedback"}:{};this.props.showFeedback(t,n)},onMoveItemClicked(e,t){const{props:n}=this;this.setState({_selectedItemId:null}),n.component._hasStarted||n.setComponentAsStarted(n.component._id),n.orderingItemMoved(n.component._id,e._id,t)},onVisibilityChange(...e){u(...e,this,this.props.setComponentAsViewed)},renderItems(){const{props:e,state:t}=this,n=e.component[e.component._selectedAnswerState];return i(n,((i,o)=>c.createElement(_,{key:i._id,item:i,index:o,isReady:e.component._isReady,isSubmitted:e.component._isSubmitted,isEnabled:e.component._isEnabled,isCorrect:e.component._isCorrect,isComplete:e.component._isComplete,cancelButtonAriaLabel:e.component.cancelButtonAriaLabel,totalItems:n.length,isSelected:i._id===t._selectedItemId,onItemClicked:()=>this.setState({_selectedItemId:i._id}),onCancelClicked:()=>this.setState({_selectedItemId:null}),onMoveItemClicked:this.onMoveItemClicked,shouldHideMarking:e.shouldHideMarking})))},render(){const{props:e}=this;return c.createElement(d,{component:e.component,styles:e.styles,shouldHideMarking:e.shouldHideMarking,isVisibilitySensorActive:p(e),onVisibilityChange:this.onVisibilityChange,onActionButtonClicked:e.actionButtonClicked,onFeedbackButtonClicked:this.showFeedback},c.createElement("div",{className:m(e.component)},c.createElement("div",{className:"ev-ordering-container"},c.createElement("div",{className:"ev-ordering-items"},c.createElement("div",{className:"ev-ordering-items-inner"},this.renderItems())))))}});e.exports=b},29787:(e,t,n)=>{const i=n(16842),{bool:o,func:s,number:r,object:a,string:c}=n(60216),d=n(59007),l=n(27378),m=n(95685),{Motion:p,spring:u}=n(59439),_=n(58343),b=n(32382),h=n(58953),k=i({displayName:"OrderingItem",propTypes:{index:r.isRequired,item:a.isRequired,totalItems:r.isRequired,isEnabled:o,isSubmitted:o,isReady:o,isCorrect:o,isComplete:o,cancelButtonAriaLabel:c,onItemClicked:s.isRequired,isSelected:o.isRequired,onCancelClicked:s.isRequired,onMoveItemClicked:s.isRequired,shouldHideMarking:o},mixins:[d],getInitialState:()=>({isMoving:!1}),UNSAFE_componentWillReceiveProps(e){const{props:t}=this;e.index!==t.index&&t.isReady&&this.setState({translateY:-100*(e.index-t.index),isMoving:!0})},componentDidUpdate(e){!e.isSelected||this.props.isSelected||this.props.isSubmitted||this._item.focus()},onItemClicked(e){e.preventDefault(),e.stopPropagation();const{props:t}=this;!t.isSubmitted&&t.isEnabled&&t.onItemClicked(t.item)},renderMarkingIcon(){const{isComplete:e,shouldHideMarking:t,item:n}=this.props;if(e&&!t)return l.createElement("div",{className:"ev-ordering-item-state"},l.createElement(_,{className:"ev-ordering-icon",isCorrect:n._isCorrect}))},renderOrderingLabels(){const{props:e}=this;if(e.isSelected)return l.createElement(h,{item:e.item,currentIndex:e.index,totalItems:e.totalItems,cancelButtonArialLabel:e.cancelButtonAriaLabel,onCancelClicked:e.onCancelClicked,onMoveItemClicked:e.onMoveItemClicked})},render(){const{props:e,state:t}=this,n=m("ev-ordering-item ev-component-item",{"ev-disabled":!e.isEnabled,"ev-correct":e.isCorrect&&e.isComplete,"ev-incorrect":!e.isCorrect&&e.isComplete,"ev-item-moving":t.isMoving});return l.createElement(p,{key:e.index,defaultStyle:{translateY:t.isMoving?t.translateY:0},style:{translateY:u(0)},onRest:()=>this.setState({isMoving:!1})},(t=>l.createElement("div",{className:n,style:{transform:`translate3d(0, ${t.translateY}%, 0)`}},l.createElement("div",{className:"ev-ordering-item-inner ev-component-item-inner"},l.createElement("button",{className:"ev-ordering-item-text",disabled:!e.isEnabled,onClick:this.onItemClicked,tabIndex:e.isSelected?-1:0,ref:e=>this._item=e},l.createElement("span",{className:"ev-ordering-item-number"},e.index+1),l.createElement(b,{element:"span",className:"ev-ordering-item-text-span",html:e.item.text})),this.renderOrderingLabels(),this.renderMarkingIcon()))))}});e.exports=k},58953:(e,t,n)=>{const i=n(90589),o=n(16842),{func:s,number:r,object:a,string:c}=n(60216),d=n(59007),l=n(27378),{Motion:m,spring:p}=n(59439),u=n(86690),_=o({displayName:"OrderingItemLabels",propTypes:{item:a.isRequired,currentIndex:r.isRequired,totalItems:r.isRequired,cancelButtonAriaLabel:c,onCancelClicked:s.isRequired,onMoveItemClicked:s.isRequired},mixins:[d],getInitialState:()=>({opacity:p(1)}),componentDidMount(){this._done.focus()},onCancelClicked(e){e.preventDefault(),e.stopPropagation(),this._isUnmounting=!0,this.setState({opacity:p(0,{stiffness:150,damping:15})})},onMoveItemClicked(e){const{props:t}=this;t.onMoveItemClicked(t.item,e)},onRest(){this._isUnmounting&&this.props.onCancelClicked()},renderLabels(){const{props:e}=this;return i(e.totalItems,(t=>t===e.currentIndex?null:l.createElement("a",{key:t,href:"#",className:"ev-ordering-order-label",role:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),this.onMoveItemClicked(t)}},l.createElement("span",{className:"ev-ordering-item-number"},t+1))))},render(){const{props:e}=this,t=this.renderLabels();return l.createElement(m,{defaultStyle:{opacity:0},style:this.state,onRest:this.onRest},(n=>l.createElement("div",{className:"ev-ordering-order-labels ev-clearfix",style:n},l.createElement("div",{className:"ev-ordering-order-labels-inner ev-clearfix"},t),l.createElement("a",{ref:e=>this._done=e,href:"#",className:"ev-ordering-order-labels-done",role:"button","aria-label":e.cancelButtonAriaLabel,onClick:this.onCancelClicked},l.createElement(u,{icon:"cross"})))))}});e.exports=_},17948:(e,t,n)=>{const{registerComponent:i}=n(59671),o=n(82003),s=n(22102),{orderingItemMoved:r}=n(71110);i("ordering",{component:o,actions:{orderingItemMoved:r},reducer:s,trackingMap:n(12447)})},22102:(e,t,n)=>{const i=n(36782),o=n(94971),s=n(37213),r=n(98978),a=n(11093),c=n(86330),{SETUP_COMPONENT:d,SETUP_ANSWER_STATE:l,SUBMIT_QUESTION:m,SHOW_CORRECT_ANSWER:p,HIDE_CORRECT_ANSWER:u}=n(26759),{ORDERING_ITEM_MOVED:_}=n(71110);function b(e){return i({},e,{_selectedAnswerState:"_correctAnswer"})}e.exports=(e,t)=>{switch(t.type){case d:return function(e){return e._isComplete?e._isComplete&&!e._hasUserAnswered&&e._isCorrect&&(e=b(e)):e=i({},e,{_items:o(e._items),_canSubmit:!0}),e}(e);case l:return function(e){return e._correctAnswer=s(r(e._items,"itemIndex"),(e=>i({},e,{_isCorrect:!0}))),e}(e);case _:return function(e,t){const{itemId:n,index:o}=t.payload;let s;const r=a(e._items,(e=>{const t=e._id===n;return t&&(s=e),t}));return r.splice(o,0,s),i({},e,{_items:r})}(e,t);case m:return function(e){const t=s(e._items,((e,t)=>i({},e,{_isCorrect:e.itemIndex===t}))),n=c(t,(e=>e._isCorrect)).length,o=n===t.length;return i({},e,{_items:t,_isCorrect:o,_isPartlyCorrect:!o&&!!n,_hasUserAnswered:!0})}(e);case p:return b(e);case u:return function(e){return i({},e,{_selectedAnswerState:"_items"})}(e);default:return e}}},12447:e=>{e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isCorrect:{fieldKey:"_isCorrect",type:"Boolean",shouldRestore:!0},text:{fieldKey:"text",type:"String",shouldRestore:!0}}},_hasUserAnswered:{fieldKey:"_hasUserAnswered",type:"Boolean",shouldRestore:!0},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0}}},60696:(e,t,n)=>{const{store:i}=n(59671),o=n(4527);function s(e,t,n){const s=e._feedback[n],r=o(s);return t&&!r?i.getState().course._globals._feedbackText[n]:r?s:null}function r(e,t){const n=e._feedbackNavigation;if(n&&n[t]&&n[t]._isEnabled&&n[t]._linkType)return{_link:n[t]}}e.exports=function(e){let t;return t=e._isCorrect?function(e){const t=e._feedback._shouldUseGlobalCorrectFeedback;return{feedbackMessage:(t?i.getState().course._globals._feedbackText.correctFeedback:"")+(e._feedback.correct?e._feedback.correct:""),feedbackGraphic:s(e,t,"_correctGraphic"),feedbackNavigation:r(e,"_correct")}}(e):e._isPartlyCorrect?function(e){const{_partlyCorrect:t}=e._feedback,n=t._shouldUseGlobalPartlyCorrectFeedback,o=i.getState().course._globals._feedbackText;return 0===e._attemptsLeft?{feedbackMessage:(n?o.partlyCorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:s(e,n,"_partlyCorrectFinalGraphic"),feedbackNavigation:r(e,"_partlyCorrect")}:{feedbackMessage:(n?o.partlyCorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:s(e,n,"_partlyCorrectNotFinalGraphic"),feedbackNavigation:r(e,"_partlyCorrectNotFinal")}}(e):function(e){const{_incorrect:t}=e._feedback,n=t._shouldUseGlobalIncorrectFeedback,o=i.getState().course._globals._feedbackText;return 0===e._attemptsLeft||!t.notFinal&&!n||!o.incorrectNotFinalFeedback&&n?{feedbackMessage:(n?o.incorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:s(e,n,"_incorrectFinalGraphic"),feedbackNavigation:r(e,0===e._attemptsLeft?"_incorrect":"_incorrectNotFinal")}:{feedbackMessage:(n?o.incorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:s(e,n,"_incorrectNotFinalGraphic"),feedbackNavigation:r(e,"_incorrectNotFinal")}}(e),!1!==e._shouldShowDisplayTitleInFeedback&&(t.feedbackTitle=e.displayTitle),t}},88153:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:n,isPageReady:i}=e;return!0===i&&!0===n._isReady&&!0!==n[t]}},67209:(e,t,n)=>{const i=n(95685);e.exports=e=>i(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},17290:e=>{e.exports=function(e,t,n,i,o){i&&i.props&&i.props.component?(t.top&&(i.isInviewTop=!0),t.bottom&&(i.isInviewBottom=!0),i.isInviewTop&&i.isInviewBottom&&o&&o(i.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);