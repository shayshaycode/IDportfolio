"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9617],{22490:(e,t)=>{t.BOOKMARKING_COMPONENT_COMPLETED="BOOKMARKING_COMPONENT_COMPLETED",t.BOOKMARKING_NAVIGATE_TO_COMPONENT="BOOKMARKING_NAVIGATE_TO_COMPONENT",t.BOOKMARKING_CANCEL_CONTINUE="BOOKMARKING_CANCEL_CONTINUE",t.bookmarkingComponentCompleted=e=>({type:t.BOOKMARKING_COMPONENT_COMPLETED,payload:e})},73883:(e,t,o)=>{const{registerReducer:n,registerEpics:s}=o(59671),r=o(79112),{bookmarkingAddPromptEpic:a,bookmarkingComponentCompleteEpic:i,bookmarkingNavigateEpic:_,registerTrackingMapEpic:p}=o(9965);n("bookmarking",r),s(a,i,_,p)},9965:(e,t,o)=>{var n=o(49923);const{registerTrackingMap:s}=o(59671),{SETUP_APP:r,APP_READY:a}=o(81661),{COMPONENT_COMPLETED:i}=o(26759),{addPrompt:_,clearAllPrompts:p}=o(36159),m=o(35782),{BOOKMARKING_NAVIGATE_TO_COMPONENT:l,BOOKMARKING_CANCEL_CONTINUE:c,bookmarkingComponentCompleted:E}=o(22490),{SETUP_COURSE_ASSESSMENT_RETAKE:d}=o(74386),C=o(35142);t.bookmarkingAddPromptEpic=(e,t)=>e.filter((e=>{if(e.type!==a)return!1;const{bookmarking:o}=t.getState();return o&&o._isEnabled&&o._lastCompletedComponentId})).take(1).map((()=>{const e=t.getState(),{bookmarking:o,course:n,courseAssessment:s={}}=e;let r;return r=o._isRetakeAssessmentNotificationEnabled&&s._isEnabled&&s._isComplete&&!s._isPassed&&n._courseAssessment._canBeRetaken&&(n._courseAssessment._allowUnlimitedRetakeAttempts||s.retakeAttemptsTaken<n._courseAssessment._retakeAttempts)?function({bookmarking:e,course:t,courseAssessment:o}){return{title:e._retakeAssessmentNotificationTitle,body:e._retakeAssessmentNotificationBody,_hasPriority:!0,_sortOrder:0,_action:{text:t._courseAssessment.retakeAssessmentNotifyConfirmButtonText,_type:d},_dismiss:{text:t._courseAssessment.retakeAssessmentNotifyCancelButtonText},_glyph:{_type:"progressCircle",_percentage:o.score}}}(e):function(e){return{title:e._notificationTitle,body:e._notificationBody,_hasPriority:!0,_sortOrder:0,_action:{text:e._notificationConfirm,_type:l},_dismiss:{text:e._notificationCancel,_type:c},_glyph:{_type:"icon",_icon:"bookmark"}}}(o),_(r)})),t.bookmarkingComponentCompleteEpic=(e,t)=>e.filter((e=>{if(e.type!==i)return!1;const{bookmarking:o}=t.getState();return o&&o._isEnabled})).map((e=>E(e.payload.componentId))),t.bookmarkingNavigateEpic=(e,t)=>e.ofType(l).mergeMap((()=>{const{bookmarking:e,components:o}=t.getState(),s=o[e._lastCompletedComponentId];return s?(m(s),n.Observable.of(p())):n.Observable.empty()})),t.registerTrackingMapEpic=(e,t)=>e.filter((e=>{if(e.type!==r)return!1;const{bookmarking:o}=t.getState();return o&&o._isEnabled})).do((()=>{s("bookmarking",C,"extensions")})).ignoreElements()},79112:(e,t,o)=>{const{SETUP_APP:n,APP_READY:s}=o(81661),{RESTORE_EXTENSION:r}=o(49442),{BOOKMARKING_COMPONENT_COMPLETED:a}=o(22490),i={_isEnabled:!1,_lastCompletedComponentId:null};e.exports=(e=i,t)=>{if(t.type===n){const o=t.payload.course._bookmarking;return o?._isEnabled?{...e,...o}:i}if(t.type===s&&e._isEnabled){const{scorm:o,_localStorage:n}=t.payload;let s=null;return o?._isEnabled?s=o?.suspendData?._lastCompletedComponentId:n?._isEnabled&&(s=n?.session?.lastCompletedComponentId),s?{...e,_lastCompletedComponentId:s}:e}if(!e._isEnabled)return i;switch(t.type){case a:return{...e,_lastCompletedComponentId:t.payload};case r:return"bookmarking"===t.payload.extensionName?{...e,...t.payload.extensionData}:e;default:return e}}},35142:e=>{e.exports={_lastCompletedComponentId:{fieldKey:"_lastCompletedComponentId",type:"String",shouldRestore:!0}}}}]);