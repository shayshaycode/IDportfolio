"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8211],{58792:(e,t)=>{t.SET_AUDIO_ITEM_AS_COMPLETE="SET_AUDIO_ITEM_AS_COMPLETE",t.setAudioItemAsComplete=(e,i)=>({type:t.SET_AUDIO_ITEM_AS_COMPLETE,payload:{componentId:e,itemId:i}})},90562:(e,t,i)=>{const{registerComponent:s}=i(59671),n=i(99516),o=i(48884),{setAudioItemAsComplete:r}=i(58792);s("audio",{component:n,actions:{setAudioItemAsComplete:r},reducer:o,trackingMap:i(4634)})},99516:(e,t,i)=>{const s=i(86330),n=i(37213),o=i(16842),{func:r,object:a}=i(60216),p=i(27378),d=i(95685),{Component:l}=i(84335),m=i(39400),c=i(88153),u=i(17290),h=i(67209),_=i(4148),y=o({displayName:"Audio",propTypes:{course:a.isRequired,component:a.isRequired,setAudioItemAsComplete:r.isRequired,setComponentAsReady:r.isRequired,setComponentAsViewed:r.isRequired,setComponentAsStarted:r.isRequired,setComponentAsComplete:r.isRequired,styles:a},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},UNSAFE_componentWillReceiveProps(e){s(e.component._items,"_isComplete").length!==e.component._items.length||e.component._isComplete||this.props.setComponentAsComplete(this.props.component._id)},setAudioItemAsComplete(e){this.props.setAudioItemAsComplete(this.props.component._id,e)},setComponentAsStarted(){this.props.component._hasStarted||this.props.setComponentAsStarted(this.props.component._id)},onVisibilityChange(...e){u(...e,this,this.props.setComponentAsViewed)},getClassName(){const{component:e}=this.props;return d(h(e),{"ev-has-grid-layout":e._enableColumnLayout})},renderItems(){return n(this.props.component._items,(e=>p.createElement(_,{key:e._id,item:e,transcriptTitle:this.props.course._videos?.transcriptTitle,enableColumnLayout:this.props.component._enableColumnLayout,shouldDisplayControls:this.props.component._shouldDisplayControls,setComponentAsStarted:this.setComponentAsStarted,setAudioItemAsComplete:this.setAudioItemAsComplete})))},renderItemsContainer(){const{component:e}=this.props;return e._enableColumnLayout?p.createElement(m,{isList:!0,columns:e._numberOfColumns,animations:e._animations},this.renderItems()):p.createElement("ul",{className:"ev-audio-items"},this.renderItems())},render(){const{props:e}=this;return p.createElement(l,{component:e.component,styles:e.styles,isVisibilitySensorActive:c(e),onVisibilityChange:this.onVisibilityChange},p.createElement("div",{className:this.getClassName()},this.renderItemsContainer()))}});e.exports=y},4148:(e,t,i)=>{const s=i(30485),n=i(16842),{bool:o,func:r,object:a,shape:p,string:d}=i(60216),l=i(27378),{connect:m}=i(13844),c=i(95685),u=i(22810),h=i(96834),_=i(927),y=i(88115),{addPrompt:C}=i(36159),g=n({displayName:"AudioItem",propTypes:{item:p({_audio:a,_transcript:a,_setCompletionOn:d}).isRequired,enableColumnLayout:o,shouldDisplayControls:o,setAudioItemAsComplete:r.isRequired,setComponentAsStarted:r.isRequired,transcriptTitle:d,addPrompt:r.isRequired},getInitialState:()=>({isTranscriptOpen:!1}),componentDidUpdate({item:e}){if(!this._audio)return;const{item:t}=this.props;t._audio._isExternalLink===e._audio._isExternalLink?t._audio._isExternalLink?t._audio.externalUrl!==e._audio.externalUrl&&this._audio.load?.():u(t._audio?.mp3)!==u(e._audio?.mp3)&&this._audio.load?.():this._audio.load?.()},setAudioItemAsComplete(){this.props.setAudioItemAsComplete(this.props.item._id)},onAudioButtonClicked(e){if(e.preventDefault(),this._audio.paused)return this._audio.currentTime=0,void this._audio?.play();this._audio.pause?.()},onPlay(){const{props:e}=this;"play"!==e.item._setCompletionOn||e.item._isComplete||this.setAudioItemAsComplete(),e.setComponentAsStarted()},onTranscriptButtonClicked(){const{_setCompletionOn:e,_isComplete:t,_transcript:i}=this.props.item;if("play"!==e&&"ended"!==e||t||this.setAudioItemAsComplete(),this.props.setComponentAsStarted(),s(i,"_shouldOpenTranscriptInPopup",!0))return this.props.addPrompt({title:this.props.transcriptTitle,body:i.body,_glyph:{_type:"icon",_icon:"audio-book"}});this.setState((({isTranscriptOpen:e})=>({isTranscriptOpen:!e})))},onAudioEnded(){const{props:e}=this;"ended"!==e.item._setCompletionOn||e.item._isComplete||this.setAudioItemAsComplete()},onVisibilityChanged(e,{top:t,bottom:i}){t&&(this.isInviewTop=!0),i&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&this.setAudioItemAsComplete()},getIsVisibilitySensorActive(){const{item:e}=this.props;return"inview"===s(e,"_setCompletionOn","inview")&&!e._isComplete},renderAudioSource(){const{item:e}=this.props;let t=e._audio.mp3;return t&&(t=u(t)),e._audio._isExternalLink&&(t=e._audio.externalUrl),l.createElement("source",{src:t,type:"audio/mp3"})},renderAudioElement(){const{item:e,shouldDisplayControls:t}=this.props,i=!e._audio.poster||t;return l.createElement("audio",{ref:e=>this._audio=e,preload:"auto",onPlay:this.onPlay,onEnded:this.onAudioEnded,controls:i,controlsList:"nodownload"},this.renderAudioSource())},renderAudioButton(){const{_audio:e}=this.props.item;if(e.poster)return l.createElement("button",{className:"ev-audio-player-button",onClick:this.onAudioButtonClicked},l.createElement(h,{graphicSrc:e.poster,altText:e.alt}))},renderTranscriptButton(){const{_transcript:e}=this.props.item;if(!e?.button||!e?.body)return;const t=s(e,"_shouldOpenTranscriptInPopup",!0)?"popup":"collapse";return l.createElement(_.Button,{text:e.button,transcriptType:t,isTranscriptOpen:this.state.isTranscriptOpen,onClick:this.onTranscriptButtonClicked})},renderTranscriptBody(){const{_transcript:e}=this.props.item;if(e?.body&&!s(e,"_shouldOpenTranscriptInPopup",!0))return l.createElement(_.Body,{text:e.body,className:c("ev-component-body",{"ev-display-none":!this.state.isTranscriptOpen}),innerClassName:"ev-component-body-inner"})},render(){const{props:e}=this,t=e.enableColumnLayout?"div":"li";return l.createElement(y,{active:this.getIsVisibilitySensorActive(),delay:600,partialVisibility:!0,onChange:this.onVisibilityChanged},l.createElement(t,{className:"ev-audio-item"},this.renderAudioButton(),this.renderAudioElement(),this.renderTranscriptButton(),this.renderTranscriptBody()))}});e.exports=m(null,{addPrompt:C})(g)},48884:(e,t,i)=>{const s=i(37213),{SET_AUDIO_ITEM_AS_COMPLETE:n}=i(58792);e.exports=(e,t)=>{if(t.type===n){const i=s(e._items,(e=>e._id===t.payload.itemId?{...e,_isComplete:!0}:e));return{...e,_items:i}}return e}},4634:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0}}}}},39400:(e,t,i)=>{const s=i(63269),n=i(36782),o=i(16842),r=i(27378),a=i(95685),{bool:p,func:d,object:l,number:m,string:c}=i(60216),{connect:u}=i(13844),{Trail:h,config:_,animated:y,interpolate:C}=i(24450),g=i(88115),I=i(86664),A=o({displayName:"Grid",propTypes:{isList:p.isRequired,isRTL:p.isRequired,shouldIgnoreScreenSize:p.isRequired,animations:l,gridItemStyle:l,gridItemInnerStyle:l,windowWidth:m.isRequired,getGridItemInnerStyle:d,hasGridItemInnerPadding:p,className:c,columns:m,separatorBorder:c},getDefaultProps:()=>({isList:!1,isRTL:!1,shouldIgnoreScreenSize:!1,gridItemStyle:{},gridItemInnerStyle:{},hasGridItemInnerPadding:!0,animations:{_slideInX:{_isEnabled:!1},_slideInY:{_isEnabled:!1},_fadeInItem:{_isEnabled:!1},_scaleInItem:{_isEnabled:!1},_easing:"default"}}),getInitialState(){return{columns:this.getColumns(window.innerWidth,this.props.columns),isVisible:!1,_animationEnded:!1}},componentDidMount(){this._isMounted=!0},componentWillUnmount(){this._isMounted=!1},UNSAFE_componentWillReceiveProps(e){const{props:t}=this,i=e.windowWidth!==t.windowWidth,s=t.columns!==e.columns;(i||s)&&this.updateColumns(e.windowWidth,e.columns)},getGridClassName(){return a("ev-grid",this.props.className)},getColumns(e,t){return this.props.shouldIgnoreScreenSize?t:e>=768?t||2:e<768&&e>=520?2:1},updateColumns(e,t){this._isMounted&&this.setState({columns:this.getColumns(e,t)})},getAnimationsEnabled(){const{animations:e}=this.props;let t=!1;return e&&(t=0!==s(e).values().filter({_isEnabled:!0}).value().length),t},getGridItemStyle(e,t,i,s,o,r){const{isRTL:a}=this.props,{_animationEnded:p}=this.state,d=100/this.state.columns,l=n({flex:`${d}%`,textAlign:"center",boxSizing:"border-box",margin:"10px 0"},this.props.gridItemStyle);t&&(l.opacity=i,l.transform=C([s,o,r],((e,t,i)=>`translate(${e}%,${t}%) scale(${i})`)),p&&(l.transform="none"));const m=this.props.children.length%this.state.columns;if((e+1)%this.state.columns!=0&&this.props.separatorBorder&&(l.borderRight=this.props.separatorBorder),0!==m)if(1===m)e===this.props.children.length-1&&(l.margin="auto");else if(e===this.props.children.length-m){let e=d/2;2===m&&4===this.state.columns&&(e=d),a?l.marginRight=`${e}%`:l.marginLeft=`${e}%`}return l},getGridItemInnerStyle(e){const{gridItemInnerStyle:t,getGridItemInnerStyle:i,hasGridItemInnerPadding:s}=this.props,o=i?i(e):{};return n({padding:s?"0 10px":0,boxSizing:"border-box"},t,o)},getVisibilitySensorActive(){return!1===this.state.isVisible},onVisibilityChange(e){e&&this.setState({isVisible:!0})},getSpringTo(){const{isVisible:e}=this.state;return e?{opacity:1,x:0,y:0,scale:1}:I(this.props.animations)},onStart(){this.setState({_animationEnded:!1})},onRest(){this.setState({_animationEnded:!0})},renderGridItems(e){const{isList:t,children:i,animations:s}=this.props,n=t?y.li:y.div;return e?r.createElement(h,{native:!0,key:i.length,from:I(s),to:this.getSpringTo(),onStart:this.onStart,onRest:this.onRest,config:_[s._easing]||_.default,keys:i.map(((e,t)=>t)),items:i},((e,t)=>({opacity:i,x:s,y:o,scale:a})=>r.createElement(n,{key:t,className:"ev-grid-item",style:this.getGridItemStyle(t,!0,i,s,o,a)},r.createElement("div",{className:"ev-grid-item-inner",style:this.getGridItemInnerStyle(t)},e)))):i.map(((e,t)=>r.createElement(n,{key:t,className:"ev-grid-item",style:this.getGridItemStyle(t,!1)},r.createElement("div",{className:"ev-grid-item-inner",style:this.getGridItemInnerStyle(t)},e))))},render(){const{isList:e}=this.props,t=e?"ul":"div";return this.getAnimationsEnabled()?r.createElement(g,{active:this.getVisibilitySensorActive(),partialVisibility:!0,scrollCheck:!0,scrollThrottle:10,intervalDelay:250,minTopValue:200,onChange:this.onVisibilityChange},r.createElement(t,{className:this.getGridClassName()},this.renderGridItems(!0))):r.createElement(t,{className:this.getGridClassName()},this.renderGridItems(!1))}});e.exports=u((({device:e,course:t})=>({windowWidth:e.windowWidth,isRTL:t._isRTL})))(A)},88153:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:i,isPageReady:s}=e;return!0===s&&!0===i._isReady&&!0!==i[t]}},67209:(e,t,i)=>{const s=i(95685);e.exports=e=>s(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},17290:e=>{e.exports=function(e,t,i,s,n){s&&s.props&&s.props.component?(t.top&&(s.isInviewTop=!0),t.bottom&&(s.isInviewBottom=!0),s.isInviewTop&&s.isInviewBottom&&n&&n(s.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);