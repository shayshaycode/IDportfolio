"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[70],{1847:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Collapse=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=c(n(27378)),s=c(n(60216)),a=n(59439);function c(e){return e&&e.__esModule?e:{default:e}}var d="WAITING",l="RESIZING",p="RESTING",m="IDLING",u=function(){return null},h=t.Collapse=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return f.call(n),n.state={currentState:m,from:0,to:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isOpened,n=e.forceInitialAnimation,i=e.onRest;if(t){var o=this.getTo();if(n){var r=this.wrapper.clientHeight;this.setState({currentState:l,from:r,to:o})}else this.setState({currentState:m,from:o,to:o})}i()}},{key:"componentWillReceiveProps",value:function(e){e.hasNestedCollapse?e.isOpened!==this.props.isOpened&&this.setState({currentState:d}):this.state.currentState===m&&(e.isOpened||this.props.isOpened)&&this.setState({currentState:d})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,i=n.isOpened,o=n.onRest,r=n.onMeasure;if(this.state.currentState!==m){t.to!==this.state.to&&r({height:this.state.to,width:this.content.clientWidth});var s=this.wrapper.clientHeight,a=i?this.getTo():0;s===a?this.state.currentState!==p&&this.state.currentState!==d||this.setState({currentState:m,from:s,to:a}):this.setState({currentState:l,from:s,to:a})}else o()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.raf)}},{key:"render",value:function(){return r.default.createElement(a.Motion,i({},this.getMotionProps(),{onRest:this.onRest,children:this.renderContent}))}}]),t}(r.default.PureComponent);h.propTypes={isOpened:s.default.bool.isRequired,springConfig:s.default.objectOf(s.default.number),forceInitialAnimation:s.default.bool,hasNestedCollapse:s.default.bool,fixedHeight:s.default.number,theme:s.default.objectOf(s.default.string),style:s.default.object,onRender:s.default.func,onRest:s.default.func,onMeasure:s.default.func,children:s.default.node.isRequired},h.defaultProps={forceInitialAnimation:!1,hasNestedCollapse:!1,fixedHeight:-1,style:{},theme:{collapse:"ReactCollapse--collapse",content:"ReactCollapse--content"},onRender:u,onRest:u,onMeasure:u};var f=function(){var e=this;this.onContentRef=function(t){e.content=t},this.onWrapperRef=function(t){e.wrapper=t},this.onRest=function(){e.raf=requestAnimationFrame(e.setResting)},this.setResting=function(){e.setState({currentState:p})},this.getTo=function(){var t=e.props.fixedHeight;return t>-1?t:e.content.clientHeight},this.getWrapperStyle=function(t){if(e.state.currentState===m&&e.state.to){var n=e.props.fixedHeight;return n>-1?{overflow:"hidden",height:n}:{height:"auto"}}return e.state.currentState!==d||e.state.to?{overflow:"hidden",height:Math.max(0,t)}:{overflow:"hidden",height:0}},this.getMotionProps=function(){var t=e.props.springConfig;return e.state.currentState===m?{defaultStyle:{height:e.state.to},style:{height:e.state.to}}:{defaultStyle:{height:e.state.from},style:{height:(0,a.spring)(e.state.to,i({precision:1},t))}}},this.renderContent=function(t){var n=t.height,o=e.props,s=(o.isOpened,o.springConfig,o.forceInitialAnimation,o.hasNestedCollapse,o.fixedHeight,o.theme),a=o.style,c=o.onRender,d=(o.onRest,o.onMeasure,o.children),l=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(o,["isOpened","springConfig","forceInitialAnimation","hasNestedCollapse","fixedHeight","theme","style","onRender","onRest","onMeasure","children"]),p=e.state;return c({current:n,from:p.from,to:p.to}),r.default.createElement("div",i({ref:e.onWrapperRef,className:s.collapse,style:i({},e.getWrapperStyle(Math.max(0,n)),a)},l),r.default.createElement("div",{ref:e.onContentRef,className:s.content},d))}}},27281:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnmountClosed=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=c(n(27378)),s=c(n(60216)),a=n(1847);function c(e){return e&&e.__esModule?e:{default:e}}(t.UnmountClosed=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentWillReceiveProps=function(e){var t=e.isOpened;!n.props.isOpened&&t&&n.setState({forceInitialAnimation:!0,shouldUnmount:!1})},n.onRest=function(){var e=n.props,t=e.isOpened,i=e.onRest;t||n.setState({shouldUnmount:!0}),i&&i.apply(void 0,arguments)},n.state={shouldUnmount:!n.props.isOpened,forceInitialAnimation:!n.props.isOpened},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.isOpened,n=(e.onRest,function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["isOpened","onRest"])),o=this.state,s=o.forceInitialAnimation;return o.shouldUnmount?null:r.default.createElement(a.Collapse,i({forceInitialAnimation:s,isOpened:t,onRest:this.onRest},n))}}]),t}(r.default.PureComponent)).propTypes={isOpened:s.default.bool.isRequired,onRest:s.default.func}},85336:(e,t,n)=>{var i=n(1847).Collapse,o=n(27281).UnmountClosed;o.Collapse=i,o.UnmountClosed=o,e.exports=o},17678:(e,t,n)=>{const{registerComponent:i}=n(59671),o=n(79648),r=n(10362),{accordionItemClicked:s,accordionItemVideoMetricsChanged:a}=n(67326);i("accordion",{component:o,actions:{accordionItemClicked:s,accordionItemVideoMetricsChanged:a},reducer:r,trackingMap:n(22059)})},67326:(e,t)=>{t.ACCORDION_ITEM_CLICKED="ACCORDION_ITEM_CLICKED",t.ACCORDION_ITEM_VIDEO_METRICS="ACCORDION_ITEM_VIDEO_METRICS",t.accordionItemClicked=e=>({type:t.ACCORDION_ITEM_CLICKED,payload:e}),t.accordionItemVideoMetricsChanged=e=>({type:t.ACCORDION_ITEM_VIDEO_METRICS,payload:e})},79648:(e,t,n)=>{const i=n(30485),o=n(37213),r=n(16842),{bool:s,func:a,object:c}=n(60216),d=n(27378),l=n(95685),{Component:p}=n(84335),m=n(67209),u=n(88153),h=n(17290),f=n(87813),v=r({displayName:"Accordion",propTypes:{component:c.isRequired,accordionItemClicked:a.isRequired,accordionItemVideoMetricsChanged:a.isRequired,setComponentAsReady:a.isRequired,setComponentAsViewed:a.isRequired,setComponentAsStarted:a.isRequired,setComponentAsComplete:a.isRequired,styles:c,theme:c.isRequired,animationEnded:s},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},UNSAFE_componentWillReceiveProps(e){e.component._isComplete||e.component._items.filter((e=>e._isVisited)).length===e.component._items.length&&this.props.setComponentAsComplete(this.props.component._id)},onItemClicked(e){const{props:t}=this;t.component._hasStarted||t.setComponentAsStarted(t.component._id),t.accordionItemClicked({componentId:t.component._id,itemId:e})},onItemVideoMetricsChanged(e,t){const{component:n,accordionItemVideoMetricsChanged:i}=this.props;i({componentId:n._id,itemId:e,metrics:t})},onVisibilityChange(...e){h(...e,this,this.props.setComponentAsViewed)},getClassName(){const{component:e,theme:t}=this.props,n=i(t,"_components._accordion._settings",{});return l(m(e),{"ev-is-icon-right-side":n._isIconOnRightSide,"ev-is-collapsed":n._isItemSpacingCollapsed})},render(){const{props:e}=this;return d.createElement(p,{component:e.component,styles:e.styles,isVisibilitySensorActive:u(e),onVisibilityChange:this.onVisibilityChange},d.createElement("div",{className:this.getClassName()},d.createElement("div",{className:"ev-accordion-items"},o(e.component._items,(t=>d.createElement(f,{key:t._id,item:t,componentId:e.component._id,shouldShowCheckIcon:e.component._shouldShowCheckIcon,onItemClicked:this.onItemClicked,onItemVideoMetricsChanged:this.onItemVideoMetricsChanged,animationEnded:e.animationEnded}))))))}});e.exports=v},87813:(e,t,n)=>{const i=n(16842),{bool:o,func:r,object:s,string:a}=n(60216),c=n(27378),d=n(95685),l=n(22810),p=n(29650),m=n(25489),{Collapse:u}=n(85336),h=n(96834),f=n(59007),v=n(26627),_=n(22612),y=n(86690),g=n(41033),C=n(85294),b=n(32382),I=i({displayName:"AccordionItem",propTypes:{item:s.isRequired,onItemClicked:r.isRequired,onItemVideoMetricsChanged:r.isRequired,shouldShowCheckIcon:o,componentId:a.isRequired,animationEnded:o},mixins:[f],componentDidUpdate({item:e}){const{item:t}=this.props;"video"===m(t)&&t._isSelected&&!e._isSelected&&t._video?._shouldAutoPlay&&this._video?.play?.()},onItemClicked(e){e.preventDefault(),this.props.onItemClicked(this.props.item._id)},onKeyDown(e){_.isSpaceKey(e)&&this.onItemClicked(e)},getBodyClassName(){const{item:e}=this.props,t=m(e)?`ev-js-graphic-${e._itemGraphicLayout}`:null;return d("ev-accordion-item-body-inner ev-component-item-body-inner",t)},renderIcon(){const{item:e,shouldShowCheckIcon:t}=this.props,n=t&&e._isVisited?"check":e._isSelected?"minus":"plus";return c.createElement(y,{className:"ev-accordion-item-title-icon",icon:n})},renderBodyTextTop(){if(!["top","left"].includes(this.props.item._itemGraphicLayout))return this.renderBodyText()},renderBodyTextBottom(){if(!["bottom","right"].includes(this.props.item._itemGraphicLayout))return this.renderBodyText()},renderBodyText(){if(this.props.item.body)return c.createElement(g,{className:"ev-accordion-item-body-content",body:this.props.item.body})},renderMedia(){switch(m(this.props.item)){case"image":return this.renderGraphic();case"gif":return this.renderGif();case"video":return this.renderVideo();case"videoStream":return this.renderVideoStream();default:return null}},renderGraphic(){const{_graphic:e}=this.props.item;return c.createElement("div",{className:"ev-accordion-item-graphic"},c.createElement("div",{className:"ev-accordion-item-graphic-inner"},c.createElement(h,{graphicSrc:e.src,graphicSrcAdvanced:e.srcAdvanced,altText:e.alt,autoSize:!0,isLightboxEnabled:e._isLightboxEnabled,lightboxSrc:e.lightboxSrc,lightboxSrcAdvanced:e.lightboxSrcAdvanced,isMagnifierEnabled:e._isMagnifierEnabled})))},renderGif(){const{_gif:e}=this.props.item;return c.createElement("div",{className:"ev-accordion-item-graphic"},c.createElement("div",{className:"ev-accordion-item-graphic-inner"},c.createElement(h,{graphicSrc:e.src,altText:e.alt})))},renderVideo(){const{item:e,onItemVideoMetricsChanged:t}=this.props;return c.createElement("div",{className:"ev-accordion-item-video"},c.createElement("div",{className:"ev-accordion-item-video-inner"},c.createElement(v,{ref:e=>this._video=e,src:l(e._video.mp4),posterSrc:p(e._video.poster),subtitlesSrc:l(e._video._subtitles?.src),subtitlesLabel:e._video._subtitles?.label,transcriptText:e._video._transcript?.body,transcriptType:"popup",transcriptButtonText:e._video._transcript?.button,controls:!0,hasBigPlayButton:!0,metrics:e._metrics,autoPlay:!1,onMetricsChange:n=>t(e._id,n),isVisible:e._isSelected,animationEnded:this.props.animationEnded})))},renderVideoStream(){const{componentId:e,item:t}=this.props;return c.createElement("div",{className:"ev-accordion-item-video"},c.createElement("div",{className:"ev-accordion-item-video-inner"},c.createElement(C,{id:`${e}-${t._id}`,service:t._videoStream._service,options:t._videoStream._options,isVisible:t._isSelected,transcriptText:t._videoStream._transcript?.body,transcriptType:"popup",transcriptButtonText:t._videoStream._transcript?.button})))},render(){const{componentId:e,item:t}=this.props,n=t._isSelected||!1,i=e+t._id,o=`${i}label`,r=`${i}region`;return c.createElement("div",{className:d("ev-accordion-item-container",{"ev-selected":t._isSelected})},c.createElement("div",{key:o,className:"ev-accordion-item"},c.createElement("a",{href:"#",className:d("ev-accordion-item-title ev-component-item-title",{"ev-visited":t._isVisited,"ev-selected":t._isSelected}),tabIndex:"0",onClick:this.onItemClicked,onKeyDown:this.onKeyDown,id:o,"aria-expanded":n,"aria-controls":r,role:"button"},c.createElement("div",{className:"ev-accordion-item-title-inner ev-component-item-title-inner"},this.renderIcon(),c.createElement(b,{element:"span",className:"ev-accordion-item-title-text",html:t.title})))),c.createElement("div",{key:r,id:r,"aria-labelledby":o,role:"region",className:"ev-accordion-item-body ev-component-item-body"},c.createElement(u,{springConfig:{stiffness:200,damping:20},isOpened:n,style:{visibility:n?"visible":"hidden"}},c.createElement("div",{className:this.getBodyClassName()},this.renderBodyTextTop(),this.renderMedia(),this.renderBodyTextBottom()))))}});e.exports=I},10362:(e,t,n)=>{const i=n(37213),{ACCORDION_ITEM_CLICKED:o,ACCORDION_ITEM_VIDEO_METRICS:r}=n(67326);e.exports=function(e,t){switch(t.type){case o:{const n=i(e._items,(n=>{const i=n._id===t.payload.itemId;if(i&&!n._isSelected)return{...n,_isSelected:!0,_isVisited:!0};const{_shouldKeepItemsOpen:o}=e;return i||!o&&n._isSelected?{...n,_isSelected:!1}:n}));return{...e,_items:n}}case r:{const n=i(e._items,(e=>e._id===t.payload.itemId?{...e,_metrics:t.payload.metrics}:e));return{...e,_items:n}}default:return e}}},22059:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isVisited:{fieldKey:"_isVisited",type:"Boolean",shouldRestore:!0},_metrics:{fieldKey:"_metrics",type:"Object",shouldRestore:!0}}}}},88153:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:n,isPageReady:i}=e;return!0===i&&!0===n._isReady&&!0!==n[t]}},25489:(e,t,n)=>{const i=n(30485),o=n(4527);e.exports=e=>{const t=i(e,"_mediaType","image");switch(t){case"gif":if(!e._gif?.src)return;break;case"video":if(!e._video?.mp4)return;break;case"videoStream":if(!e._videoStream?._service||!e._videoStream?._options?._source)return;break;default:if(!o(e._graphic))return}return t}},67209:(e,t,n)=>{const i=n(95685);e.exports=e=>i(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},17290:e=>{e.exports=function(e,t,n,i,o){i&&i.props&&i.props.component?(t.top&&(i.isInviewTop=!0),t.bottom&&(i.isInviewBottom=!0),i.isInviewTop&&i.isInviewBottom&&o&&o(i.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);