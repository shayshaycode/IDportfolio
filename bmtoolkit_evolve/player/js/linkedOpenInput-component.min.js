"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7399],{75110:(e,s)=>{s.SAVE_USER_ANSWER="linkedOpenInput/SAVE_USER_ANSWER",s.saveUserAnswer=e=>({type:s.SAVE_USER_ANSWER,payload:e})},62302:(e,s,t)=>{var n=t(34398)(t(16950));const i=t(21261),r=t(37213),o=t(16842),{bool:a,func:p,object:l}=t(60216),d=t(27378),c=t(95685),{Component:u}=t(84335),m=t(16713),h=t(28212),_=t(35289),v=t(67209),A=t(88153),g=t(17290),k=t(57867),w=t(89509),b=t(52995),I=o({displayName:"LinkedOpenInput",propTypes:{component:l.isRequired,setComponentAsReady:p.isRequired,setComponentAsViewed:p.isRequired,setComponentAsComplete:p.isRequired,showFeedback:p.isRequired,saveUserAnswer:p.isRequired,setAriaLive:p.isRequired,isLinkedOpenInputsComplete:a,theme:l.isRequired,styles:l},getInitialState(){return{_userAnswer:this.props.component._userAnswer||"",showMessageModal:!1,modalMessage:null}},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},saveUserAnswer(e){this.props.saveUserAnswer({componentId:this.props.component._id,userAnswer:e}),this.showSavedModal(),e&&i(this.showFeedback,200)},clearUserAnswer(){this.props.saveUserAnswer({componentId:this.props.component._id,userAnswer:""}),this.showClearedModal()},showFeedback(){const{component:e}=this.props;if(!e._canShowFeedback)return;const s={feedbackTitle:e._shouldShowDisplayTitleInFeedback?e.displayTitle:null,feedbackMessage:e.feedbackMessage,feedbackGraphic:e.feedbackGraphic};this.props.showFeedback(s)},showSavedModal(){this.props.component._saveSuccessMessage&&(this.setState({showMessageModal:!0,modalMessage:this.props.component._saveSuccessMessage}),i((()=>this.setState({showMessageModal:!1})),1e3))},showClearedModal(){const{component:e}=this.props;(e._clearSuccessMessage||e._saveSuccessMessage)&&(this.setState({showMessageModal:!0,modalMessage:e._clearSuccessMessage||e._saveSuccessMessage}),i((()=>this.setState({showMessageModal:!1})),1e3))},onTextAreaChange(e){this.setState({_userAnswer:e})},onSaveClicked(){this.saveUserAnswer(this.state._userAnswer),this.props.setAriaLive({message:this.props.component.savedAriaLiveMessage,isAssertive:!0}),this.props.setComponentAsComplete(this.props.component._id,{_isSubmitted:!0})},onClearClicked(){this.setState({_userAnswer:""},this.clearUserAnswer),this.props.setAriaLive({message:this.props.component.clearedAriaLiveMessage,isAssertive:!1})},onVisibilityChange(...e){g(...e,this,this.props.setComponentAsViewed)},getLinkedUserAnswerStyle(){const{component:e,theme:s}=this.props,t={},n=e._linkedOpenInputAnswerBackgroundColor,i=e._linkedOpenInputAnswerTextColor;return n&&"transparent"!==n&&(t.backgroundColor=k(n,s._swatches)),i&&"transparent"!==i&&(t.color=k(i,s._swatches)),t},renderIncomplete(){if(!this.props.isLinkedOpenInputsComplete)return d.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete"},r(this.props.component._items,(e=>d.createElement(b,(0,n.default)({key:e._id},e)))))},renderOpenInputAnswers(){const{component:e}=this.props,s=this.getLinkedUserAnswerStyle();return r(e._items,(e=>d.createElement(w,(0,n.default)({key:e._id,style:s},e))))},renderTextArea(){if(!this.props.isLinkedOpenInputsComplete)return;const{component:e}=this.props,s=e._hasMinimumHeight?e._minimumHeight:300;return d.createElement(h,{ariaLabel:e.textAreaAriaLabel,value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:e.placeholder,minHeight:s})},getIsSaveDisabled(){const{component:e}=this.props,{_userAnswer:s}=this.state;return""===s&&!e._userAnswer||s===e._userAnswer},renderButtons(){if(!this.props.isLinkedOpenInputsComplete)return;const{_isActionButtonOnRight:e}=_(this.props);return d.createElement("div",{className:c("ev-buttons",{"ev-switch-buttons":e})},d.createElement(m,{className:"ev-button-save",text:this.props.component._saveButton,isDisabled:this.getIsSaveDisabled(),onClick:this.onSaveClicked}),this.props.component._clearButton.length?d.createElement(m,{className:"ev-button-clear",text:this.props.component._clearButton,isDisabled:""===this.state._userAnswer,onClick:this.onClearClicked}):null)},render(){const{props:e}=this;return d.createElement(u,{component:e.component,styles:e.styles,isVisibilitySensorActive:A(e),onVisibilityChange:this.onVisibilityChange},d.createElement("div",null,d.createElement("div",{className:v(e.component)},this.renderIncomplete(),this.renderOpenInputAnswers(),this.renderTextArea(),d.createElement("div",{className:c("ev-linkedOpenInput-message-modal",{"ev-is-visible":this.state.showMessageModal})},this.state.modalMessage)),this.renderButtons()))}});e.exports=I},89509:(e,s,t)=>{const n=t(27378),{connect:i}=t(13844),r=t(60216),o=t(97987),a=e=>e.isLinkedOpenInputComplete?n.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer-container"},n.createElement("div",{className:"ev-label"},e._linkedAnswerLabelText),n.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer",style:e.style},n.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer-inner"},e.linkedOpenInputUserAnswer))):null;a.propTypes={isLinkedOpenInputComplete:r.bool.isRequired,linkedOpenInputUserAnswer:r.string,_linkedAnswerLabelText:r.string,style:r.object},e.exports=i(((e,s)=>{const t=s._linkedOpenInputId?o(s._linkedOpenInputId):{};return{isLinkedOpenInputComplete:t._isComplete||!1,linkedOpenInputUserAnswer:t._userAnswer}}))(a)},52995:(e,s,t)=>{const n=t(27378),{connect:i}=t(13844),r=t(60216),o=t(71315),a=t(97987),p=t(16713),l=e=>e.isLinkedOpenInputComplete?null:n.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete-message"},n.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete-message-inner ev-label"},e._linkedIncompleteMessage),n.createElement(p,{className:"ev-linkedOpenInput-navigate-linked",text:e._navigateToLinkedButtonText,onClick:()=>o(e._linkedOpenInputId)}));l.propTypes={isLinkedOpenInputComplete:r.bool.isRequired,_linkedOpenInputId:r.string,_navigateToLinkedButtonText:r.string,_linkedIncompleteMessage:r.string},e.exports=i(((e,s)=>({isLinkedOpenInputComplete:(s._linkedOpenInputId?a(s._linkedOpenInputId):{})._isComplete||!1})))(l)},71459:(e,s,t)=>{const{registerComponent:n}=t(59671),i=t(62302),r=t(36798),{saveUserAnswer:o}=t(75110);n("linkedOpenInput",{component:i,actions:{saveUserAnswer:o},reducer:r,mapStateToProps:t(15609),trackingMap:t(79555)})},15609:(e,s,t)=>{const n=t(63269),i=t(56786),r=t(99725),o=t(41537);e.exports=(e,s)=>{let t=s._isAlwaysEnabled;if(!t){const o=n(s._items).map((e=>e._linkedOpenInputId)).compact().value(),a=r(o,e);t=void 0===i(a,(e=>!0!==e._isComplete))}return{isLinkedOpenInputsComplete:t,articleStyle:o(e,s,"article")._classes}}},36798:(e,s,t)=>{const n=t(44695),{SAVE_USER_ANSWER:i}=t(75110);e.exports=(e,{type:s,payload:t})=>s===i?{...e,_userAnswer:t.userAnswer,_isCorrect:!0,_isSubmitted:!0,_correctAt:n()}:e},79555:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0}}},28212:(e,s,t)=>{const n=t(16842),i=t(60216),r=t(27378),o=t(95685),a=n({displayName:"TextArea",propTypes:{id:i.string,value:i.string.isRequired,label:i.string,onChange:i.func.isRequired,onFocus:i.func,onBlur:i.func,className:i.string,placeholder:i.string,minHeight:i.number,ariaLabel:i.string,isDisabled:i.bool,shouldFocus:i.bool},getDefaultProps:()=>({value:""}),componentDidUpdate(e){const{shouldFocus:s}=this.props;s&&!e.shouldFocus&&this._textArea.focus()},renderTextArea(){const{props:e}=this;return r.createElement("textarea",{id:e.id,ref:e=>this._textArea=e,"aria-label":e.ariaLabel,value:e.value,onChange:s=>e.onChange(s.target.value),onFocus:e.onFocus,onBlur:e.onBlur,placeholder:e.placeholder,className:o("ev-text-area",e.className),style:{minHeight:e.minHeight},disabled:e.isDisabled})},render(){const{props:e}=this;return e.label?r.createElement(r.Fragment,null,r.createElement("label",{className:"ev-label",htmlFor:e.id,dangerouslySetInnerHTML:{__html:e.label},style:{pointerEvents:e.isDisabled?"none":"all"}}),this.renderTextArea()):this.renderTextArea()}});e.exports=a},88153:e=>{e.exports=(e,s="_hasBeenViewed")=>{const{component:t,isPageReady:n}=e;return!0===n&&!0===t._isReady&&!0!==t[s]}},67209:(e,s,t)=>{const n=t(95685);e.exports=e=>n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},17290:e=>{e.exports=function(e,s,t,n,i){n&&n.props&&n.props.component?(s.top&&(n.isInviewTop=!0),s.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&i&&i(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);