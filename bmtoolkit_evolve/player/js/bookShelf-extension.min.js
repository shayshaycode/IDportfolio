"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6526],{29315:(e,t,o)=>{const{registerReducer:a,registerEpics:r}=o(59671),i=o(63565),n=o(30101),{bookShelfSetupEpic:s,registerTrackingMapEpic:l,saveTrackingEpic:c}=o(30611);a("bookShelf",n),r(s,l,c,i("bookShelf"))},33005:(e,t,o)=>{const a=o(86330),r=o(37213),i=o(16842),{array:n,bool:s,func:l,object:c,shape:h,string:d}=o(60216),p=o(27378),{connect:S}=o(13844),_=o(95685),b=o(41033),m=o(15835),E=o(86690),f=o(47662),{setAriaLive:k}=o(22160),u=o(87217),g=o(88644),{ContentContainer:v,HeroImage:A}=o(85975),y=o(3327),T=i({displayName:"BookShelf",propTypes:{bookShelf:h({title:d,body:d,noItemsText:d,ariaLabel:d,_headerIcon:d,_heroImage:c}).isRequired,articles:n.isRequired,theme:c.isRequired,isReady:s.isRequired,setAriaLive:l.isRequired},componentDidUpdate(e){!this.props.articles.length&&e.articles.length&&this.props.setAriaLive({message:this.props.bookShelf.noItemsText,isAssertive:!1})},renderTitle(){if(this.props.bookShelf.title)return p.createElement(m,{headingElement:`h${this.context}`,displayTitle:this.props.bookShelf.title,className:"ev-header-title",innerClassName:"ev-header-title-inner"})},renderBody(){if(this.props.bookShelf.body)return p.createElement(b,{className:"ev-header-body",innerClassName:"ev-header-body-inner",body:this.props.bookShelf.body})},renderNoItems(){const{bookShelf:e,articles:t}=this.props;if(!t.length)return p.createElement(f,null,p.createElement(b,{className:"ev-component-body",innerClassName:"ev-component-body-inner",body:e.noItemsText}))},renderArticles(){const{articles:e}=this.props;return e.length?r(e,(e=>p.createElement(u,{key:e._id,articleId:e._id}))):null},renderHeroImage(){const{_heroImage:e}=this.props.bookShelf;if(e?._isEnabled)return p.createElement(y.Provider,{value:this.props.bookShelf.title?this.context+1:this.context},p.createElement(A,{title:e.title,body:e.body,graphic:e._graphic,_contentWidth:e._contentWidth,layout:e.layout,floatingGraphic:e._floatingGraphic,parentSelector:".ev-extension-hero-container",theme:this.props.theme,isReady:this.props.isReady}))},render(){const{bookShelf:e,theme:t,isReady:o}=this.props,a=e._headerIcon,r=t._extensions._bookShelf?._settings?._headerIcon,i=a||r,n=e.title||e._heroImage?._isEnabled&&e._heroImage?.title?this.context+1:this.context;return p.createElement(v,{region:"bookshelf",className:"ev-extension ev-bookShelf",ariaLabel:e.ariaLabel},p.createElement("div",{className:"ev-extension-inner"},o?null:p.createElement(g,null),p.createElement("div",{className:"ev-extension-hero-container"},this.renderHeroImage()),p.createElement("div",{className:"ev-header"},p.createElement("div",{className:_("ev-header-inner ev-clearfix",{"ev-no-graphic":!i})},p.createElement("div",{className:"ev-header-left"},this.renderTitle(),this.renderBody()),i&&p.createElement("div",{className:"ev-header-right"},p.createElement(E,{icon:i})))),p.createElement(y.Provider,{value:n},this.renderNoItems(),this.renderArticles())))}});T.contextType=y,e.exports=S((({bookShelf:e,theme:t,location:o,articles:r})=>({bookShelf:e,theme:t,isReady:o.isLocationReady,articles:a(r,(({_bookShelf:e})=>e?._isEnabled&&e?._isShelved))})),{setAriaLive:k})(T)},42385:(e,t,o)=>{const a=o(27378),{connect:r}=o(13844),{updateArticle:i}=o(11717),n=o(16713);e.exports=r(null,{updateArticle:i})((({article:e,ariaLabel:t,updateArticle:o})=>e._bookShelf?._isEnabled?a.createElement("div",{className:"ev-article-action-bar-item"},a.createElement(n,{variant:"chromeless",icon:e._bookShelf._isShelved?"bookmark":"book2",iconSize:34,"aria-label":t,"aria-pressed":e._bookShelf._isShelved,onClick:()=>o({_id:e._id,_bookShelf:{...e._bookShelf,_isShelved:!e._bookShelf._isShelved}})})):null))},30611:(e,t,o)=>{const a=o(30485),{Observable:r}=o(49923),{registerTrackingMap:i}=o(59671),{SETUP_APP:n}=o(81661),{addElement:s}=o(75670),{NavigationSideItem:l}=o(58160),c=o(24365),{UPDATE_ARTICLE:h}=o(11717),{trackerSaveSession:d}=o(92394),p=o(42385),S=o(33005),_=o(75905);t.bookShelfSetupEpic=(e,t)=>e.filter((e=>{const o=t.getState();return e.type===n&&o?.bookShelf?._isEnabled})).mergeMap((()=>{const e=t.getState(),{bookShelf:o}=e,i=s({parent:"navigationSide",name:"bookShelf",component:l,props:{link:"/bookShelf",icon:c("_bookShelf","_navigationIcon","bookmark"),label:o.title}}),n=s({parent:"article",name:"bookShelf",component:p,position:"actionBar",props:{ariaLabel:o.shelveButtonAriaLabel}}),h=s({parent:"router",name:"bookShelf",path:"/bookShelf",exact:!0,component:S,getShouldPersist:e=>a(e,"course._bookShelf._isEnabled",!1)});return r.of(i,n,h)})),t.registerTrackingMapEpic=(e,t)=>e.filter((e=>{if(e.type!==n)return!1;const{bookShelf:o}=t.getState();return o&&o._isEnabled})).do((()=>{i("bookShelf",_,"extensions")})).ignoreElements(),t.saveTrackingEpic=(e,t)=>e.filter((e=>e.type===h&&t.getState().bookShelf?._isEnabled&&e.payload._bookShelf)).mergeMap((()=>r.of(d())))},30101:(e,t,o)=>{const{SETUP_APP:a}=o(81661),r={_isEnabled:!1};e.exports=(e=r,t)=>{if(t.type===a){const{_bookShelf:o}=t.payload.course;return o._isEnabled?{...e,...o}:r}return e._isEnabled?(t.type,e):r}},75905:(e,t,o)=>{const a=o(8930),{store:r}=o(59671),{updateArticle:i}=o(11717);e.exports={_articles:{fieldKey:"_articles",type:"Function",shouldRestore:!0,mapCallback:function(){const{articles:e}=r.getState(),t={};return a(e,(e=>{e?._bookShelf?._isEnabled&&(t[e._id]={_isShelved:e._bookShelf._isShelved})})),t},restoreCallback:function(e){const{articles:t}=r.getState();a(e._articles,((e,o)=>{const a=t[o];a&&r.dispatch(i({_id:o,_bookShelf:{...a?._bookShelf,...e}}))}))}}}},92394:(e,t)=>{t.TRACKER_LOAD_DATA="TRACKER_LOAD_DATA",t.TRACKER_SAVE_SESSION="TRACKER_SAVE_SESSION",t.SET_TRACKER_AUTH="SET_TRACKER_AUTH",t.SAVE_TRACKER_DONE="SAVE_TRACKER_DONE",t.trackerLoadData=e=>({type:t.TRACKER_LOAD_DATA,payload:e}),t.trackerSaveSession=e=>({type:t.TRACKER_SAVE_SESSION,payload:e}),t.setTrackerAuth=e=>({type:t.SET_TRACKER_AUTH,payload:e}),t.saveTrackingDone=e=>({type:t.SAVE_TRACKER_DONE,payload:e})},24365:(e,t,o)=>{const a=o(30485),{store:r}=o(59671);e.exports=function(e,t,o){const{course:i,theme:n}=r.getState(),s=i[e],l=a(s,t),c=a(n,["_extensions",e,"_settings",t]);return l||c||o}},63565:(e,t,o)=>{const a=o(30485),{Observable:r}=o(49923),{setLocationReadyState:i,PUSH_LOCATION:n}=o(81661),s=o(81986),l=o(29650);e.exports=(e,t)=>(o,c)=>o.filter((({type:t})=>{if(t!==n)return;const{navigationStatus:o,path:a}=c.getState().location;return"plugin"===o&&a[0]===e})).switchMap((()=>{const o=c.getState(),{device:n,course:h}=o;let d;if(d=t?t(o):a(h,[`_${e}`,"_heroImage"]),!d||!d._graphic)return r.empty();const p=s(d._graphic.src,d._graphic.srcAdvanced,!0);return p?r.concat(r.of(i(!1)),r.bindCallback(l)(p,!1).map((()=>i(!0)))):r.empty()}))}}]);