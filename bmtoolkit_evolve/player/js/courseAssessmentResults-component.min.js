"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5011],{51034:(e,s,t)=>{var n=t(84994),o=t(34398)(t(16950));const r=t(21261),a=t(16842),{bool:i,func:l,object:c,shape:m,string:p}=t(60216),u=t(27378),d=t(31542),{connect:v}=t(13844),{Component:h}=t(84335),C=t(67209),w=t(88153),E=t(17290),A=t(32382),b=t(3327),{courseAssessmentSelector:_,courseAssessmentComponentsSelector:N}=t(96026),k=t(76282),f=t(17256),{showConfirmResetDialog:R}=t(74386),g=a({displayName:"CourseAssessmentResults",propTypes:{component:m({_id:p,displayTitle:p,_scrollIntoViewOnComplete:i,_showIncompleteFeedback:i,_alwaysShowRetakeButton:i}).isRequired,components:c.isRequired,courseAssessment:c,setComponentAsReady:l.isRequired,setComponentAsViewed:l.isRequired,setComponentAsStarted:l.isRequired,setComponentAsComplete:l.isRequired,styles:c,showConfirmResetDialog:l},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},UNSAFE_componentWillReceiveProps({courseAssessment:e}){const{props:s}=this;s.component._scrollIntoViewOnComplete&&!s.courseAssessment._isComplete&&e._isComplete&&r((()=>{const e=d.findDOMNode(this);n(e).scrollintoview({duration:600,direction:"vertical"})}),300)},onVisibilityChange(...e){E(...e,this,this.props.setComponentAsStarted)},renderOnlyTitleAndIncompleteFeedback(){const{component:e,courseAssessment:s}=this.props,t=e.displayTitle?this.context+1:this.context;return u.createElement("div",{className:"ev-course-assessment-results-incomplete-feedback"},u.createElement("div",{className:"ev-component-title"},u.createElement(A,{element:`h${t}`,className:"ev-component-title-inner",html:s.resultsOverviewTitle})),u.createElement("div",{className:"ev-component-body"},u.createElement(A,{className:"ev-component-body-inner",html:s.incompleteFeedback})))},renderRetake(){const{component:e,courseAssessment:s,showConfirmResetDialog:t}=this.props;if(e._alwaysShowRetakeButton||s._isComplete)return s._canBeRetaken?u.createElement(f,{courseAssessment:s,onRetakeAssessment:t,hideRetakeButton:!1,isComponentRetake:!0}):null},renderResults(){const{courseAssessment:e,component:s,components:t}=this.props;return s._showIncompleteFeedback&&!e._isComplete?this.renderOnlyTitleAndIncompleteFeedback():u.createElement(u.Fragment,null,u.createElement(k,(0,o.default)({isComponentOverview:!0,components:t},e)),this.renderRetake())},render(){const{props:e}=this;return u.createElement(h,{component:e.component,styles:e.styles,isVisibilitySensorActive:w(e),onVisibilityChange:this.onVisibilityChange},u.createElement("div",{className:C(e.component)},u.createElement("div",{className:"ev-course-assessment-results-component-overview-container"},e.courseAssessment._isEnabled?this.renderResults():u.createElement("h4",null,"The Course Assessment Results Component requires the Course Assessment Extension to be enabled."))))}});g.contextType=b,e.exports=v((e=>({courseAssessment:_(e),components:N(e)})),{showConfirmResetDialog:R})(g)},19289:(e,s,t)=>{const{registerComponent:n,registerEpics:o}=t(59671),r=t(51034),a=t(38908),{assessmentCompletedEpic:i}=t(92151);o(i),n("courseAssessmentResults",{component:r,trackingMap:a})},92151:(e,s,t)=>{const n=t(63269),{Observable:o}=t(49923),{setComponentAsComplete:r}=t(26759);s.assessmentCompletedEpic=(e,s)=>e.ofType("COURSE_ASSESSMENT_COMPLETE").mergeMap((()=>{const{components:e}=s.getState(),t=n(e).filter((e=>"courseAssessmentResults"===e._component)).map((e=>r(e._id))).value();return o.of(...t)}))},38908:e=>{e.exports={_interactionType:{type:"String",default:"presentation",shouldRestore:!1}}},25520:(e,s,t)=>{const n=t(16842),{bool:o,number:r,object:a,string:i}=t(60216),l=t(27378),c=t(31542),{connect:m}=t(13844),p=t(57867),u=t(60235),d=n({displayName:"CourseAssessmentProgressCircle",propTypes:{variables:a.isRequired,componentsCount:r.isRequired,completedComponentsCount:r.isRequired,swatches:a,text:i.isRequired,ariaHidden:o},getDefaultProps:()=>({ariaHidden:!1,completedComponentsCount:0}),componentDidMount(){const e=c.findDOMNode(this),{variables:s,componentsCount:t,completedComponentsCount:n,swatches:o,text:r}=this.props,a=p(s["@chart-background-color"],o),i=p(s["@chart-highlight-color"],o),l=p(s["@chart-text-color"],o);u(e,80,80,n,t,r,18,38,38,4,4,a,i,l)},render(){return l.createElement("div",{className:"ev-course-assessment-results-stats-progress-canvas","aria-hidden":this.props.ariaHidden})}});e.exports=m((({theme:e})=>({variables:e._chart._variables,swatches:e._swatches})))(d)},76282:(e,s,t)=>{const n=t(30485),o=t(8930),r=t(51331),a=t(86330),i=t(61868),l=t(16842),c=t(27378),{bool:m,object:p,number:u,string:d}=t(60216),{connect:v}=t(13844),h=t(41033),C=t(15835),w=t(86690),E=t(32382),A=t(3327),b=t(47662),_=t(25520),N=l({displayName:"CourseAssessmentResultsOverview",propTypes:{components:p.isRequired,completedComponentsCount:u,isComponentOverview:m,isFullScreenOpen:m,_isComplete:m,_isPassed:m,_showScoreAsPercentage:m,_showQuestionsCompleted:m,_showQuestionsCorrect:m,_showAttemptsTaken:m,incompleteFeedback:d,scoreText:d.isRequired,score:u.isRequired,resultsOverviewTitle:d.isRequired,progressDescription:d.isRequired,resultsQuestionsCorrect:d.isRequired,resultsViewAverageAttemptsTakenText:d.isRequired},getDefaultProps:()=>({_showScoreAsPercentage:!0,_showQuestionsCompleted:!0,_showQuestionsCorrect:!0,_showAttemptsTaken:!0}),getFeedback(){const{props:e}=this;return e._isComplete?n(e,["_feedback",e._isPassed?"passed":"failed"]):e.incompleteFeedback},getAverageAttempts(){const{props:e}=this;let s=0;return o(e.components,(e=>{if(!e._isComplete)return;const{_attempts:t,_attemptsLeft:n}=e,o=t-n;s+=r(o)?o:1})),Math.round(s/e.completedComponentsCount*100)/100||"0"},getCorrectComponentsCount(){return a(this.props.components,{_isComplete:!0,_isCorrect:!0}).length},renderScore(e){if(!this.props._isComplete)return;const{score:s,_showScoreAsPercentage:t,scoreText:n,_isPassed:o}=this.props,r=s+(t?"%":""),a=c.createElement(w,{className:"ev-info-detail-display",icon:o?"check":"cross"}),i=c.createElement(E,{element:"span",html:`${n} <b>${r}</b>`});return e?c.createElement("div",{className:"ev-course-assessment-results-component-overview-results"},c.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},c.createElement("div",{className:"ev-info-detail"},a),c.createElement("div",{className:"ev-label"},i))):c.createElement("div",{className:"ev-info-detail"},a,c.createElement("div",{className:"ev-info-detail-label"},i))},renderResultsDetail(e){const{_showQuestionsCompleted:s,_showQuestionsCorrect:t,_showAttemptsTaken:n}=this.props;if(s||t||n)return e?c.createElement("div",{className:"ev-course-assessment-results-component-overview-results"},this.renderQuestionsCompleted(!0),this.renderQuestionsCorrect(!0),this.renderAttempts(!0)):c.createElement("div",{className:"ev-content-row ev-course-assessment-results-roundup"},c.createElement("div",{className:"ev-content-row-inner ev-clearfix"},this.renderQuestionsCompleted(),this.renderQuestionsCorrect(),this.renderAttempts()))},renderQuestionsCompleted(e){const{props:s}=this;if(!s._showQuestionsCompleted)return;const t=i(s.components),n=`${Math.round(s.completedComponentsCount/t*100)}%`;return e?c.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},c.createElement(_,{key:s.completedComponentsCount,text:n,ariaHidden:!0,componentsCount:t,completedComponentsCount:s.completedComponentsCount}),c.createElement(E,{className:"ev-label",html:`${s.progressDescription} <span class="ev-visually-hidden">${n}</span>`})):c.createElement("div",{className:"ev-course-assessment-results-progress ev-course-assessment-results-roundup-col"},c.createElement(_,{key:s.isFullScreenOpen,text:n,ariaHidden:!0,componentsCount:t,completedComponentsCount:s.completedComponentsCount}),c.createElement(E,{className:"ev-course-assessment-results-progress-text ev-info-graph-label",html:`${s.progressDescription} <span class="ev-visually-hidden">${n}</span>`}))},renderQuestionsCorrect(e){const{_showQuestionsCorrect:s,components:t,resultsQuestionsCorrect:n}=this.props;if(!s)return;const o=`${this.getCorrectComponentsCount()} / ${i(t)}`;return e?c.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},c.createElement("div",{className:"ev-info-detail"},c.createElement("div",{className:"ev-info-detail-display","aria-hidden":!0},o)),c.createElement(E,{className:"ev-label",html:`${n} <span class="ev-visually-hidden">${o}</span>`})):c.createElement("div",{className:"ev-course-assessment-results-questions ev-course-assessment-results-roundup-col"},c.createElement("div",{className:"ev-course-assessment-results-questions-inner ev-info-detail"},c.createElement("div",{className:"ev-course-assessment-results-question-result ev-info-detail-display","aria-hidden":!0},o),c.createElement(E,{className:"ev-course-assessment-results-question-text ev-info-detail-label",html:`${n} <span class="ev-visually-hidden">${o}</span>`})))},renderAttempts(e){const{_showAttemptsTaken:s,resultsViewAverageAttemptsTakenText:t}=this.props;if(!s)return;const n=this.getAverageAttempts();return e?c.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},c.createElement("div",{className:"ev-info-detail"},c.createElement("div",{className:"ev-info-detail-display","aria-hidden":!0},n)),c.createElement(E,{className:"ev-label",html:`${t} <span class="ev-visually-hidden">${n}</span>`})):c.createElement("div",{className:"ev-course-assessment-results-attempts ev-course-assessment-results-roundup-col"},c.createElement("div",{className:"ev-course-assessment-results-attempts-inner ev-info-detail"},c.createElement("div",{className:"ev-course-assessment-results-attempts-result ev-info-detail-display","aria-hidden":!0},n),c.createElement(E,{className:"ev-course-assessment-results-attempts-text ev-info-detail-label",html:`${t} <span class="ev-visually-hidden">${n}</span>`})))},renderComponentOverview(){const{props:e}=this;return c.createElement("div",{className:"ev-course-assessment-results-component-overview"},c.createElement(C,{headingElement:`h${this.context+1}`,displayTitle:e.resultsOverviewTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),this.renderScore(!0),c.createElement(h,{className:"ev-component-body",innerClassName:"ev-component-body-inner",body:this.getFeedback()}),this.renderResultsDetail(!0))},render(){const{props:e}=this;return e.isComponentOverview?this.renderComponentOverview():c.createElement(b,{className:"ev-course-assessment-results-overview"},c.createElement(C,{headingElement:`h${this.context}`,displayTitle:e.resultsOverviewTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),c.createElement("div",{className:"ev-content-row"},c.createElement("div",{className:"ev-content-row-inner"},this.renderScore(),c.createElement(h,{className:"ev-course-assessment-results-overview-status-feedback  ev-content-body",innerClassName:"ev-course-assessment-results-overview-status-feedback-inner ev-content-body-inner",body:this.getFeedback()}))),this.renderResultsDetail())}});N.contextType=A,e.exports=v((({fullScreen:e})=>({isFullScreenOpen:e.isOpen})))(N)},17256:(e,s,t)=>{const n=t(27378),o=t(60216),r=t(16713),a=t(15835),i=t(3327),l=t(47662),c=e=>{const s=n.useContext(i),t=s=>{s.preventDefault(),e.onRetakeAssessment()},o=()=>{const{retakeAttemptsPrefixText:s,retakeAttemptsTaken:t,_retakeAttempts:n,_allowUnlimitedRetakeAttempts:o}=e.courseAssessment;return o?`${s}: ${t}`:`${s}: ${t}/${n}`},c=()=>{const{retakeAttemptsTaken:s,_retakeAttempts:o,retakeAssessmentButtonText:a,_allowUnlimitedRetakeAttempts:i,_shouldHideRetakeOnAssessmentPassed:l,_isPassed:c}=e.courseAssessment;if(!(e.hideRetakeButton||l&&c)&&(s!==o||i))return n.createElement("div",{className:"ev-course-assessment-results-overview-reset"},n.createElement("div",{className:"ev-course-assessment-results-overview-reset-inner"},n.createElement(r,{onClick:t,variant:"warning",text:a})))};return e.isComponentRetake?n.createElement("div",{className:"ev-course-assessment-results-component-overview-retake"},n.createElement("div",{className:"ev-label"},o()),c()):n.createElement(l,null,n.createElement(a,{headingElement:`h${s}`,displayTitle:o(),className:"ev-component-title",innerClassName:"ev-component-title-inner"}),c())};c.propTypes={courseAssessment:o.object.isRequired,onRetakeAssessment:o.func,hideRetakeButton:o.bool,isComponentRetake:o.bool},e.exports=n.memo(c)},60235:(e,s,t)=>{const n=t(41399);e.exports=function(e,s,t,o,r,a,i,l,c,m,p,u,d,v){const h=n(e,s,t);h.customAttributes.arc=function(e,s,t,n,o){const r=360/n*t,a=(90-r)*Math.PI/180,i=e+o*Math.cos(a),l=s-o*Math.sin(a);return{path:n===t?[["M",e,s-o],["A",o,o,0,1,1,e-.01,s-o]]:[["M",e,s-o],["A",o,o,0,+(r>180),1,i,l]]}},h.text(s/2,t/2,a).attr({"font-size":i,fill:v,"font-weight":"bold"}),h.circle(s/2,t/2,c).attr({stroke:u,"stroke-width":p}),h.path().attr({stroke:d,"stroke-width":m,arc:[s/2,t/2,0,r,l]}).rotate(0,0,0).animate({arc:[s/2,t/2,o,r,l]},1900)}},96026:(e,s,t)=>{const n=t(36782),o=t(88423),{createSelector:r}=t(36107),a=e=>e.courseAssessment;s.courseAssessmentSelector=r([e=>e.course._courseAssessment,a],((e={},s={})=>n({},e,s))),s.courseAssessmentComponentsSelector=r([a,e=>e.components],((e,s)=>e?o(s,e.componentIds):{})),s.courseAssessmentStatusSelector=r(a,(e=>e._isComplete?e._isPassed?"pass":"fail":"incomplete"))},88153:e=>{e.exports=(e,s="_hasBeenViewed")=>{const{component:t,isPageReady:n}=e;return!0===n&&!0===t._isReady&&!0!==t[s]}},67209:(e,s,t)=>{const n=t(95685);e.exports=e=>n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},17290:e=>{e.exports=function(e,s,t,n,o){n&&n.props&&n.props.component?(s.top&&(n.isInviewTop=!0),s.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&o&&o(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);