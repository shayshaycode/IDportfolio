"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5135],{20861:(e,t)=>{t.MEDIA_METRICS_CHANGED="MEDIA_METRICS_CHANGED",t.videoMetricsChanged=(e,o)=>({type:t.MEDIA_METRICS_CHANGED,payload:{componentId:e,metrics:o}})},81051:(e,t,o)=>{const s=o(16842),{bool:n,func:i,object:p,string:r}=o(60216),c=o(27378),{Component:a}=o(84335),d=o(67209),l=o(22810),{connect:m}=o(13844),h=o(41537),_=o(88153),C=o(17290),u=o(26627),y=s({displayName:"Media",propTypes:{component:p.isRequired,setComponentAsReady:i.isRequired,setComponentAsViewed:i.isRequired,setComponentAsStarted:i.isRequired,setComponentAsComplete:i.isRequired,articleStyle:r.isRequired,styles:p,videoMetricsChanged:i.isRequired,screenSize:r.isRequired,animationEnded:n},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},setComponentAsComplete(){this.props.setComponentAsComplete(this.props.component._id)},onVideoPlay(){const{component:e}=this.props;e._hasStarted||this.props.setComponentAsStarted(e._id),e._isComplete||"play"!==e._setCompletionOn||this.setComponentAsComplete()},onVideoEnded(){const{component:e}=this.props;e._isComplete||"ended"!==e._setCompletionOn||this.setComponentAsComplete()},onTranscriptViewed(){this.props.component._isComplete||this.setComponentAsComplete()},onVisibilityChange(...e){C(...e,this,"inview"===this.props.component._setCompletionOn?this.props.setComponentAsComplete:this.props.setComponentAsViewed)},onMetricsChanged(e){const{component:t,videoMetricsChanged:o}=this.props;o(t._id,e)},getVideoSrc(){const{component:e,screenSize:t}=this.props,o=e._media;if(o){if(o._isExternalLink)return o.externalUrl;if("small"===t&&o.mobileMp4)return l(o.mobileMp4);if(o.mp4)return l(o.mp4)}},getAudioDescriptionSrc(){const{component:e}=this.props;return e._audio?._isEnabled?l(e._audio.mp3):null},getHasBigPlayButton(){const{_media:e}=this.props.component;return!e?._shouldHidePlayerControls&&!e?._shouldHidePlayButton},renderVideoPlayer(){const{component:e}=this.props,t=this.getVideoSrc();if(t)return c.createElement(u,{id:e._id,src:t,controls:!e._media?._shouldHidePlayerControls,posterSrc:l(e._media?.poster),hasBigPlayButton:this.getHasBigPlayButton(),autoPlay:e._media?._shouldAutoPlay,loop:e._media?._shouldLoop,metrics:e._metrics,articleStyle:this.props.articleStyle,subtitlesSrc:l(e._subtitles?.src),subtitlesLabel:e._subtitles?.label,transcriptType:e._transcript?._shouldOpenTranscriptInPopup?"popup":"collapse",transcriptText:e._transcript?.body,transcriptButtonText:e._transcript?.button,transcriptClassName:"ev-component-body",transcriptInnerClassName:"ev-component-body-inner",audioDescriptionSrc:this.getAudioDescriptionSrc(),animationEnded:this.props.animationEnded,onPlay:this.onVideoPlay,onEnded:this.onVideoEnded,onTranscriptView:this.onTranscriptViewed,onMetricsChange:this.onMetricsChanged})},render(){const{props:e}=this,t=_(e,"inview"===e.component._setCompletionOn?"_isComplete":"_hasBeenViewed");return c.createElement(a,{component:e.component,styles:e.styles,onVisibilityChange:this.onVisibilityChange,isVisibilitySensorActive:t},c.createElement("div",{className:d(e.component)},this.renderVideoPlayer()))}});e.exports=m(((e,t)=>({articleStyle:h(e,t.component,"article")._classes})))(y)},45442:(e,t,o)=>{const{registerComponent:s}=o(59671),n=o(81051),i=o(72757),p=o(33198),{videoMetricsChanged:r}=o(20861);s("media",{component:n,trackingMap:i,reducer:p,actions:{videoMetricsChanged:r}})},33198:(e,t,o)=>{const s=o(36782),{MEDIA_METRICS_CHANGED:n}=o(20861);e.exports=(e,t)=>t.type===n?s({},e,{_metrics:t.payload.metrics}):e},72757:e=>{e.exports={_interactionType:{type:"String",default:"presentation",shouldRestore:!1},_metrics:{fieldKey:"_metrics",type:"Object",shouldRestore:!0}}},88153:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:o,isPageReady:s}=e;return!0===s&&!0===o._isReady&&!0!==o[t]}},67209:(e,t,o)=>{const s=o(95685);e.exports=e=>s(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})},17290:e=>{e.exports=function(e,t,o,s,n){s&&s.props&&s.props.component?(t.top&&(s.isInviewTop=!0),t.bottom&&(s.isInviewBottom=!0),s.isInviewTop&&s.isInviewBottom&&n&&n(s.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);